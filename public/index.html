<html>
  <head>
    <title>Sky Flatlands</title>
    <meta charset="utf-8" />
    <style>
      #screen {
        border: 1px solid #cccccc26;
        image-rendering: pixelated;
        image-rendering: crisp-edges;
        image-rendering: -moz-crisp-edges;
        height: calc(20vh);
        background: rgba(0, 0, 0, 0.49);
        right: 10px;
        top: 10px;
        position: absolute;
      }
      body {
        text-align: center;
        background-color: black;
        color: white;
      }
      body * {
        font-family: 'Arial';
      }
      h1 {
        font-size: xxx-large;
        margin: 0px;
      }
      .rs-base {
        top: calc(74vh) !important;
        opacity: 0.3 !important;
      }
      .rs-base:hover {
        opacity: 1;
      }
      #control-bar {
        position: fixed;
        top: 0px;
        width: 100%;
        height: 30px;
        z-index: 20;
        overflow: visible;
        opacity: 0.3;
      }
      #control-bar:hover {
        opacity: 1;
      }
      #control-bar .item {
        font-size: 15px;
        float: left;
        overflow: visible;
      }
      #control-bar .item h2 {
        margin: 0px;
        font-weight: normal;
        font-size: 14px;
        padding: 7px;
        background: rgba(0, 0, 0, 0.49);
      }
      #control-bar .sub-items {
        display: none;
      }
      #control-bar .item:hover .sub-items {
        display: block;
        overflow: visible;
        width: 20px;
      }
      #control-bar .item:hover h2 {
        background: rgba(0, 0, 0, 0.69);
      }
      #control-bar .sub-item:hover {
        background: rgba(0, 0, 0, 0.69);
      }
      #control-bar .sub-item {
        width: 250px;
        position: relative;
        float: left;
        text-align: left;
        border: none;
        background: rgba(0, 0, 0, 0.49);
        color: white;
        padding: 7px;
      }
    </style>
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC&display=swap" rel="stylesheet" />
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://unpkg.com/aframe-fps-counter-component@1.0.1/dist/aframe-fps-counter-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@fb96ab2/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <script type="module">
      import Core from './domain/game/core.js';
      import MiniMap from './domain/render/minimap.js';
      import AFrameCore from './domain/render/aFrameCore.js';

      window.aFrameCore = new AFrameCore();
      window.core = new Core();
      window.core.init();

      window.render = new MiniMap(screen);
    </script>

    <div id="control-bar">
      <div class="item">
        <h2>Camera</h2>
        <div class="sub-items">
          <button class="sub-item" onclick="window.aFrameCore.camera.follow()">
            Segue o primeiro elemento
          </button>
          <button class="sub-item" onclick="window.aFrameCore.camera.unFollow()">
            Parar de seguir
          </button>
        </div>
      </div>
      <div class="item">
        <h2>Elementos</h2>
        <div class="sub-items">
          <button class="sub-item" onclick="core.start()">Remove todos</button>
          <button class="sub-item" onclick="core.start()">Inserir seres vivos</button>
          <button class="sub-item" onclick="core.start()">Inserir props</button>
          <button class="sub-item" onclick="core.start()">Inserir coisas</button>
        </div>
      </div>
      <div class="item">
        <h2>Mundo</h2>
        <div class="sub-items">
          <button class="sub-item" onclick="core.start()">Preencher</button>
        </div>
      </div>
    </div>
  </body>
</html>
